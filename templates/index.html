{% extends "base.html" %}

{% block title %}Selling-options.com | Options Trading Tools & Insights{% endblock %}

{% block content %}
      <!-- Market Overview Section -->
      <section class="market-overview">
        <div class="container">
          <h1>Market Pulse</h1>
          <div class="market-grid" id="marketGrid">
            <div class="loading-message">Loading market data...</div>
          </div>
        </div>
      </section>

    <section class="cta-section">
      <div class="container">
        <div class="cta-content">
          <h2>Start Trading Options Like a Pro</h2>
          <p>Join thousands of traders using our tools to generate consistent income from options</p>
          <div class="cta-form">
            <a href="{{ url_for('auth.signup') }}" class="btn-primary">Get Free Access</a>
            <p class="form-note">Start with our free tools â€¢ No credit card required</p>
          </div>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <h4>Tools</h4>
            <ul>
              <li><a href="{{ url_for('calculator.calculator') }}">Options Calculator</a></li>
              <li><a href="#">Risk Assessment</a></li>
              <li><a href="#">Strategy Builder</a></li>
              <li><a href="#">IV Screener</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h4>Education</h4>
            <ul>
              <li><a href="#">Options Basics</a></li>
              <li><a href="#">Advanced Strategies</a></li>
              <li><a href="#">Risk Management</a></li>
              <li><a href="{{ url_for('main.video_tutorials') }}">Video Library</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h4>Company</h4>
            <ul>
              <li><a href="#">About Us</a></li>
              <li><a href="#">Contact</a></li>
              <li><a href="#">Premium Plans</a></li>
              <li><a href="#">Affiliate Program</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h4>Legal</h4>
            <ul>
              <li><a href="#">Privacy Policy</a></li>
              <li><a href="#">Terms of Service</a></li>
              <li><a href="#">Disclaimer</a></li>
              <li><a href="#">Risk Warning</a></li>
            </ul>
          </div>
        </div>
        <div class="footer-bottom">
          <p>&copy; 2025 Selling-options.com. All rights reserved.</p>
        </div>
      </div>
    </footer>
{% endblock %}

{% block extra_scripts %}
    <script>
      // Market data management - HOME PAGE SPECIFIC
      async function loadMarketData() {
        try {
          const response = await fetch('/api/market-data');
          const data = await response.json();
          
          const marketGrid = document.getElementById('marketGrid');
          marketGrid.innerHTML = '';
          
          for (const item of data) {
            const card = document.createElement('div');
            card.className = 'market-card';
            
            const changeClass = item.change >= 0 ? 'positive' : 'negative';
            const changeSymbol = item.change >= 0 ? '+' : '';
            
            card.innerHTML = `
              <div class="market-name">${item.name}</div>
              <div class="market-price">${formatPrice(item.price, item.name)}</div>
              <div class="market-change ${changeClass}">
                ${changeSymbol}${item.change} (${changeSymbol}${item.change_pct}%)
              </div>
            `;
            
            marketGrid.appendChild(card);
          }
        } catch (error) {
          console.error('Error loading market data:', error);
          document.getElementById('marketGrid').innerHTML = 
            '<div class="error-message">Failed to load market data</div>';
        }
      }

      function formatPrice(price, name) {
        if (name === 'VIX') return price.toFixed(2);
        if (price >= 1000) return `$${(price/1000).toFixed(1)}K`;
        if (price >= 100) return `$${price.toFixed(0)}`;
        if (price >= 10) return `$${price.toFixed(1)}`;
        return `$${price.toFixed(2)}`;
      }

      // Load market data on page load
      document.addEventListener('DOMContentLoaded', function() {
        loadMarketData();
        setInterval(loadMarketData, 25000); // Refresh every 25 seconds
      });
    </script>
{% endblock %}